import Head from 'next/head'
import css from './index.module.css'
import Link from 'next/link'
import { useRouter } from 'next/router'
import Image from 'next/image'
import thisButton from './thisButton.png'
import thisButtonPressed from './thisButtonPressed.png'
import { useState, useEffect } from 'react'
import { useContext } from 'react';
import { TimerContext, convertTime } from '@/context/TimerContext';

export default function Portal() {
  const router = useRouter()
  const { id } = router.query

  const [ isButtonPressed, setIsButtonPressed ] = useState(false);

  const { TimerState, setTimerState } = useContext(TimerContext);
  const { timeLimit } = TimerState;

  return (
    <>
      <Head>
        <title>blrow.world</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={css.main}>
        <div className={css.messageContainer}>
          <div className={css.messageLines}>
            Hi Aritsts #00000001
          </div>
          <div
            className={css.messageLines}
          >
              You have <span style={{color: 'greenyellow', fontFamily: 'VT323, monospace', fontSize: '6vw'}}>{convertTime(timeLimit)}</span> to finish <br/> decorating your exhibition.
          </div>
          <div 
            className={css.messageLines2}
          >
              You know what you should and <br/> shouldn't do.
          </div>
          <div className={css.messageLines2}>
            Have Fun,
      
          </div>
          <div className={css.messageLines2}>
              Sir Real. <br/>
              Director of THE GALLERY.
          </div>
        </div>
        <div className={css.messageLines3}>
          press <span className={css.messageLines3_span}>THIS</span> button to begin
        </div>
        {/* <div 
          className={isButtonPressed?  css.thisButtonPressedContainer : css.thisButtonContainer}
          onMouseDown={()=>{
            setIsButtonPressed(true);
          }}
          onClick={()=>{
            // setIsButtonPressed(false);
            setTimeout(()=>{router.push('/twitter')}, 300)
            // router.push('/twitter'); //gallery
          }}
        >
          <Image
            draggable={false}
            src={isButtonPressed? thisButtonPressed : thisButton}
            alt={'THIS button'}
            fill
          />
        </div> */}
          <ThisButton/>

        {/* <Link href={'/'}> home {id} </Link> */}
      </main>
    </>
  )
}

export async function getStaticProps(context) {

  return {
    props: {}, // will be passed to the page component as props
  }
}


function ThisButton(){
  const [ isButtonPressed, setIsButtonPressed ] = useState(false);

  return (
  <div className={css.bot}>

    <div 
      style={isButtonPressed
        ? { visibility: 'none' }
        : {}
      }
      className={css.thisButtonContainer}
      onMouseDown={()=>{
        setIsButtonPressed(true);
      }}
      onClick={()=>{
        // setIsButtonPressed(false);
        setTimeout(()=>{router.push('/twitter')}, 300)
        // router.push('/twitter'); //gallery
      }}
    >
      <Image
        draggable={false}
        src={thisButton}
        alt={'THIS button'}
        fill
      />
    </div>
    
    <div 
      className={css.thisButtonPressedContainer }
    >
      <Image
        draggable={false}
        src={thisButtonPressed}
        alt={'THIS button'}
        fill
      />
    </div>

  </div>
  )
}